(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e="zFoEOHjPw3c9gGHftKqErBE4QYiBLKCn",t="AIzaSyBWfmla3GAHbz59GlA419HSEnbrGRE-u8w",n=document.querySelectorAll(".app__tab-btn"),a=document.querySelectorAll(".app__calculate-interval, .app__holidays"),r=document.getElementById("start-date"),o=document.getElementById("end-date"),s=document.getElementById("interval-preset"),l=document.getElementById("count-options"),c=document.getElementById("day-type"),d=document.getElementById("calculate-btn"),i=document.getElementById("interval-results"),u=document.getElementById("country-select"),h=document.getElementById("year-select"),m=document.getElementById("fetch-holidays-btn"),y=document.getElementById("holiday-results"),p=document.getElementById("language-select"),g=[];function E(e){return`${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]}, ${e.getDate()} ${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${e.getFullYear()}`}function f(e){if(i.innerHTML="",0===e.length)return;const t=document.createElement("table");t.className="results-table",t.innerHTML=`\n      <thead>\n        <tr>\n          <th>Start Date</th>\n          <th>End Date</th>\n          <th>Result</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${e.map((e=>`\n          <tr>\n            <td>${e.startDate}</td>\n            <td>${e.endDate}</td>\n            <td>${e.result}</td>\n          </tr>\n        `)).join("")}\n      </tbody>\n    `,i.appendChild(t)}function v(e){y.innerHTML=`<p class="error">${e}</p>`}function b(t,n){fetch(`https://calendarific.com/api/v2/holidays?api_key=${e}&country=${t}&year=${n}`).then((e=>e.json())).then((e=>{e.response&&e.response.holidays?function(e){y.innerHTML="";const t=document.createElement("table");t.className="results-table",t.innerHTML=`\n      <thead>\n        <tr>\n          <th><button id="date-sort-btn" class="sortable">Date<i class="fa-solid fa-sort"></i></button></th>\n          <th>Holiday Name</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${e.map((e=>`\n          <tr>\n            <td>${E(new Date(e.date.iso))}</td>\n            <td>${e.name}</td>\n          </tr>\n        `)).join("")}\n      </tbody>\n    `,y.appendChild(t);const n=document.getElementById("date-sort-btn");let a=!0;n.addEventListener("click",(()=>{!function(e,t){const n=Array.from(e.rows).sort(((e,n)=>{const a=new Date(e.cells[0].textContent),r=new Date(n.cells[0].textContent);return t?a-r:r-a}));e.innerHTML="",e.append(...n)}(t.querySelector("tbody"),a),a=!a}))}(e.response.holidays):v("Error fetching holidays")})).catch((e=>{console.error("Error:",e),v("Error fetching holidays")}))}function D(e){g.forEach((n=>{(function(e,n){return fetch(`https://translation.googleapis.com/language/translate/v2?key=${t}`,{method:"POST",body:JSON.stringify({q:e,target:n}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{if(e.data&&e.data.translations)return e.data.translations[0].translatedText;throw new Error("Error translating text")}))})(n.parentNode.getAttribute("data-translate"),e).then((e=>{n.textContent=e})).catch((e=>{console.error("Error translating text:",e)}))}))}n.forEach((e=>{e.addEventListener("click",(()=>{n.forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.getAttribute("data-tab");a.forEach((e=>{e.classList.toggle("hidden",e.id!==t)}))}))})),r.addEventListener("change",(()=>{o.disabled=!r.value,o.min=r.value})),o.addEventListener("change",(()=>{r.max=o.value||""})),fetch(`https://calendarific.com/api/v2/countries?api_key=${e}`).then((e=>e.json())).then((e=>{var t;e.response&&e.response.countries?(t=e.response.countries,u.innerHTML='<option value="">Select a country</option>',t.forEach((e=>{const t=document.createElement("option");t.value=e["iso-3166"],t.textContent=e.country_name,u.appendChild(t)}))):v("Error fetching countries")})).catch((e=>{console.error("Error:",e),v("Error fetching countries")})),function(){const e=(new Date).getFullYear();for(let e=2001;e<=2049;e++){const t=document.createElement("option");t.value=e,t.textContent=e,h.appendChild(t)}h.value=e,h.disabled=!0}(),f(JSON.parse(localStorage.getItem("intervalResults"))||[]),d.addEventListener("click",(function(){const e=new Date(r.value),t=new Date(o.value);if(isNaN(e)||isNaN(t))return void alert("Please select valid dates.");const n="week"===s.value?7:30,a=l.value,d=c.value;let i=0,u=0,h=0,m=0;for(let a=new Date(e);a<=t&&m<n;a.setDate(a.getDate()+1))i++,0===a.getDay()||6===a.getDay()?h++:u++,m++;let y,p,g=i,v="";switch("weekdays"===d?(g=u,v=" with calculation for weekdays only"):"weekends"===d&&(g=h,v=" with calculation for weekends only"),a){case"hours":y=24*g,p="hours";break;case"minutes":y=24*g*60,p="minutes";break;case"seconds":y=24*g*60*60,p="seconds";break;default:y=g,p="days"}const b=E(e),D=E(t),L=`${y} ${p}${v}`,w=JSON.parse(localStorage.getItem("intervalResults"))||[];w.unshift({startDate:b,endDate:D,result:L}),w.length>10&&w.pop(),localStorage.setItem("intervalResults",JSON.stringify(w)),f(w)})),u.addEventListener("change",(()=>{h.disabled=!u.value})),m.addEventListener("click",(()=>{const e=u.value,t=h.value;e&&t?b(e,t):v("Please select both country and year")})),p.addEventListener("change",(()=>{D(p.value)})),function e(t){t.childNodes.forEach((t=>{if(t.nodeType===Node.TEXT_NODE&&t.textContent.trim().length>0){g.push(t);const e=t.parentNode;e.hasAttribute("data-translate")||e.setAttribute("data-translate",t.textContent.trim())}else t.nodeType===Node.ELEMENT_NODE&&e(t)}))}(document.body),D(p.value)}))})();